\documentclass[natbib,preprint]{sigplanconf}

\usepackage[usenames]{color}
\definecolor{citationcolour}{rgb}{0,0.4,0.2}
\definecolor{linkcolour}{rgb}{0,0,0.8}
\usepackage{hyperref}
\hypersetup{colorlinks=true,
            urlcolor=linkcolour,
            linkcolor=linkcolour,
            citecolor=citationcolour,
            pdftitle=Relational Parametricity for Algebraically-Indexed Types,
            pdfauthor={Robert Atkey, Neil Ghani, Patricia Johann, Andrew Kennedy},
            pdfkeywords={}}  
\def\sectionautorefname{Section}
\def\subsectionautorefname{Section}
\def\subsubsectionautorefname{Section}

\title{Abstraction and Invariance for Algebraically Indexed Types}

\authorinfo{Robert Atkey\and Patricia Johann}
           {University of Strathclyde}
           {\{Robert.Atkey,Patricia.Johann\}@strath.ac.uk}

\authorinfo{Andrew Kennedy}
           {Microsoft Research Cambridge}
           {akenn@microsoft.com}

\usepackage{mathpartir}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{stmaryrd}
\usepackage[all]{xy}

\newcommand{\todo}[1]{[\textbf{TODO}: #1]}

\newcommand{\GL}[1]{\mathrm{GL}_#1}
\newcommand{\SynGL}[1]{\mathsf{GL}_#1}
\newcommand{\SE}[1]{\mathsf{SE}_#1}
\newcommand{\SynSE}[1]{\mathsf{SE}_#1}
\newcommand{\Orth}[1]{\mathrm{O}_#1}
\newcommand{\SynOrth}[1]{\mathsf{O}_#1}
\newcommand{\Transl}[1]{\mathrm{T}_#1}
\newcommand{\SynTransl}[1]{\mathsf{T}_#1}
\newcommand{\Scal}{\mathrm{Scal}}
\newcommand{\SynScal}{\mathsf{Scal}}

% \newcommand{\GLtwo}{\mathrm{GL}_2}
% \newcommand{\SynGLtwo}{\mathsf{GL}_2}
% \newcommand{\GLone}{\mathrm{GL}_1}
% \newcommand{\SynGLone}{\mathsf{GL}_1}

\newcommand{\sepbar}{\mathrel|}

\newcommand{\Rel}{\mathrm{Rel}}
\newcommand{\relArrow}{\mathrel{\widehat\to}}
\newcommand{\relTimes}{\mathrel{\widehat\times}}
\newcommand{\relSum}{\mathrel{\widehat+}}

\newcommand{\setOfIntegers}{\mathbb{Z}}
\newcommand{\setOfBooleans}{\{\tmTT, \tmFF\}}

\newcommand{\id}{\mathrm{id}}

\newcommand{\SortSet}{\mathit{Sort}}
\newcommand{\IndexOpSet}{\mathit{IndexOp}}
\newcommand{\PrimTypeSet}{\mathit{PrimType}}
\newcommand{\IndexAxiomSet}{\mathit{IndexAx}}

\newcommand{\indexOp}[1]{\texttt{#1}}
\newcommand{\idxTms}[2]{\mathrm{IdxTm}(#1 \vdash #2)}
\newcommand{\idxTmAS}[1]{\mathrm{IdxTm}(#1)}

\newcommand{\tyInt}{\texttt{int}}
\newcommand{\tyBool}{\texttt{bool}}
\newcommand{\tyUnit}{\texttt{unit}}
\newcommand{\tyReal}{\texttt{real}}
\newcommand{\tyPrim}[2]{\textup{\texttt{#1}}\langle #2 \rangle}
\newcommand{\tyPrimNm}[1]{\texttt{#1}}
\newcommand{\primTyArity}{\mathrm{tyArity}}
\newcommand{\indexOpArity}{\mathrm{opArity}}

\newcommand{\tyArr}{\to}
\newcommand{\tyProduct}{\times}
\newcommand{\tyX}[1]{\texttt{X}\langle #1 \rangle}
\newcommand{\isType}{\textsf{ type}}
\newcommand{\isCtxt}{\textsf{ ctxt}}
\newcommand{\Ty}{\textsf{Ty}}
\newcommand{\ty}{\textsf{ty}}

\newcommand{\tmTT}{\texttt{tt}}
\newcommand{\tmFF}{\texttt{ff}}

\newcommand{\relEnv}[1]{\mathcal{#1}}
\newcommand{\tySem}[1]{\llbracket #1 \rrbracket^{\mathcal{T}}}
\newcommand{\ctxtSem}[1]{\llbracket #1 \rrbracket^{\mathcal{C}}}
\newcommand{\tmSem}[1]{\llbracket #1 \rrbracket^{\mathit{tm}}}
\newcommand{\tyPrimSem}[1]{\llbracket #1 \rrbracket^{\mathcal{T}_0}}
\newcommand{\rsem}[3]{\llbracket #1 \rrbracket^{\mathcal{R}}_{#2}{#3}}
\newcommand{\extends}[2]{\mathsf{ext}(#1,#2)}

\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newcommand{\lemref}[1]{\hyperref[#1]{Lemma \ref*{#1}}}
\newcommand{\thmref}[1]{\hyperref[#1]{Theorem \ref*{#1}}}
\newcommand{\defref}[1]{\hyperref[#1]{Definition \ref*{#1}}}
\newcommand{\propref}[1]{\hyperref[#1]{Proposition \ref*{#1}}}
\newcommand{\corref}[1]{\hyperref[#1]{Corollary \ref*{#1}}}
\newcommand{\conref}[1]{\hyperref[#1]{Conjecture \ref*{#1}}}
\newcommand{\exref}[1]{\hyperref[#1]{Example \ref*{#1}}}
\newcommand{\statementref}[1]{\hyperref[#1]{Statement \ref*{#1}}}

\newcommand{\sem}[1]{\llbracket #1 \rrbracket}
\newcommand{\isDefinedAs}{\stackrel{\mathit{def}}=}

\newcommand{\Geom}{\mathit{Geom}}

\newtheoremstyle{examplestyle}
  {\topsep}  % space above
  {\topsep}  % space below
  {\normalfont}% name of font to use in the body of the theorem
  {0em}% measure of space to indent
  {\bfseries}% name of head font
  {.}% punctuation between head and body
  {5pt plus 1pt minus 1pt}% space after theorem head; " " = normal interword space
  {}% Manually specify head
\theoremstyle{examplestyle}
\newtheorem{example}{Example}

\newtheoremstyle{restatementstyle}
  {\topsep}  % space above
  {\topsep}  % space below
  {\itshape}% name of font to use in the body of the theorem
  {0em}% measure of space to indent
  {\bfseries}% name of head font
  {.}% punctuation between head and body
  {5pt plus 1pt minus 1pt}% space after theorem head; " " = normal interword space
  {\thmname{#1} \thmnote{(Restatement of #3)}}% Manually specify head
\theoremstyle{restatementstyle}
\newtheorem{restateLemma}{Lemma}
\newtheorem{restateTheorem}{Theorem}

\newcommand{\fixme}[1]{\textbf{FIXME: #1}}

\begin{document}

\maketitle

\begin{abstract}
  Reynolds' relational parametricity provides a powerful way to reason
  about programs in terms of invariance under changes of data
  representation. A dazzling array of applications of Reynolds' theory
  exists, exploiting invariance to yield ``theorems for free'',
  uninhabitation results, and encodings of algebraic datatypes.

  Outside computer science, invariance under change is a common theme
  running through many areas mathematics and physics. For example, the
  area of a triangle is not altered by rotation or flipping. If we
  scale a triangle, then we scale its area, maintaining an invariant
  relationship between the triangle and its area. The transformations
  under which properties are invariant are often organised into
  groups, with the algebraic structure reflecting the composability
  and invertibility of transformations.

  In this paper, we investigate programming languages whose types are
  indexed by algebraic structures such as groups of geometric
  transformations. Other examples include types indexed by
  principals--for information flow security--and types indexed by
  distances--for analysis of analytic continuity properties. Following
  Reynolds, we prove a general abstraction theorem that covers all
  these instances. Consequences of the abstraction theorem include
  free theorems expressing invariance properties of programs, type
  isomorphisms based on invariance properties, and non-definability
  results, indicating when certain algebraically indexed types are
  uninhabited or only inhabited by trivial programs.
\end{abstract}

\category{D.1.1}{Programming techniques}{Applicative (functional)
  programming} \category{D.2.4}{Software Engineering}{Software/Program
  Verification} \category{D.3.3}{Programming Languages}{Language
  Constructs and Features---Data types and structures}

\terms
  Languages, Theory, Types

\keywords
  parametricity, units of measure, dimensional analysis, invariance, computational geometry

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{section-introduction.tex}
\input{geometry-twocolumn.tex}
\input{section-general-framework.tex}
\input{section-instantiations.tex}
\input{section-further-examples.tex}
\input{section-discussion.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{abbrvnat}
\bibliography{paper}

\newpage
\appendix

\input{appendix-proofs.tex}

\end{document}
